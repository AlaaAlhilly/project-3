{"ast":null,"code":"import _regeneratorRuntime from \"/Users/Alhilly/Desktop/dev-social-app/client/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/Alhilly/Desktop/dev-social-app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/Alhilly/Desktop/dev-social-app/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/Alhilly/Desktop/dev-social-app/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/Alhilly/Desktop/dev-social-app/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/Alhilly/Desktop/dev-social-app/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/Alhilly/Desktop/dev-social-app/client/node_modules/@babel/runtime/helpers/esm/inherits\";\n\nvar _temp,\n    _jsxFileName = \"/Users/Alhilly/Desktop/dev-social-app/client/src/components/pages/NewSnippet.js\";\n\nimport React, { Component } from 'react';\nimport { withAuth } from '@okta/okta-react';\nimport InNavbar from '../layout/InNavbar';\nimport OutNavbar from '../layout/OutNavbar';\nimport Option from './Option';\nimport uniqid from 'uniqid';\nimport Api from '../../utils/API';\nimport API from '../../utils/API';\nexport default withAuth((_temp =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(NewSnippet, _Component);\n\n  function NewSnippet(props) {\n    var _this;\n\n    _classCallCheck(this, NewSnippet);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(NewSnippet).call(this, props));\n    _this.checkAuthentication =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var authenticated;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _this.props.auth.isAuthenticated();\n\n            case 2:\n              authenticated = _context.sent;\n\n              if (authenticated !== _this.state.authenticated) {\n                _this.setState({\n                  authenticated: authenticated\n                });\n              }\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    _this.login =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _this.props.auth.login('/');\n\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    _this.logout =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee3() {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _this.props.auth.logout('/');\n\n            case 1:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    _this.getOps = function () {\n      var op = [];\n\n      _this.state.snippet.LANGUAGE_CHOICE.forEach(function (element) {\n        op.push(React.createElement(Option, {\n          value: element.name,\n          key: uniqid(),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77\n          },\n          __self: this\n        }));\n      });\n\n      return op;\n    };\n\n    _this.handldInputChange = function (event) {\n      var _event$target = event.target,\n          name = _event$target.name,\n          value = _event$target.value;\n      temp_snip[name] = value;\n      console.log(temp_snip);\n\n      _this.setState({\n        snippet: Object.assign(_this.state.snippet, temp_snip)\n      });\n    };\n\n    _this.handleSubmit = function (event) {\n      event.preventDefault();\n      var user_obj = JSON.parse(localStorage.getItem('okta-token-storage'));\n      API.getUser(user_obj.idToken.clientId).then(function (user) {\n        var snippet_to_save = {\n          title: _this.state.snippet.title,\n          desc: _this.state.snippet.desc,\n          content: _this.state.snippet.content,\n          lang: _this.state.snippet.lang,\n          likes: [],\n          comments: [],\n          author: user.data\n        };\n        Api.saveSnippet(snippet_to_save).then(function (res) {\n          console.log(res);\n          window.location.replace('/');\n        });\n      });\n    };\n\n    _this.state = {\n      authenticated: null,\n      snippet: {\n        LANGUAGE_CHOICE: [{\n          name: 'JAVASCRIPT'\n        }, {\n          name: 'CSS'\n        }, {\n          name: 'HTML'\n        }, {\n          name: 'C#'\n        }, {\n          name: 'C++'\n        }, {\n          name: 'BASH'\n        }, {\n          name: 'APACHE'\n        }, {\n          name: 'XML'\n        }, {\n          name: 'PHP'\n        }, {\n          name: 'JSON'\n        }, {\n          name: 'PERL'\n        }, {\n          name: 'SQL'\n        }, {\n          name: 'RUBY'\n        }, {\n          name: 'PYTHON'\n        }, {\n          name: 'OBJECTIVE-C'\n        }, {\n          name: 'DIFF'\n        }, {\n          name: 'JAVA'\n        }, {\n          name: 'COFFEESCRIPT'\n        }, {\n          name: 'MAKEFILE'\n        }, {\n          name: 'NGINX'\n        }],\n        title: \"\",\n        desc: \"\",\n        content: \"\",\n        language: \"JAVASCRIPT\",\n        comments: [],\n        likes: [],\n        author: {}\n      }\n    };\n    _this.temp_snip = {};\n    return _this;\n  }\n\n  _createClass(NewSnippet, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4() {\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                this.checkAuthentication();\n\n              case 1:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"componentDidUpdate\",\n    value: function () {\n      var _componentDidUpdate = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee5() {\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                this.checkAuthentication();\n\n              case 1:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function componentDidUpdate() {\n        return _componentDidUpdate.apply(this, arguments);\n      }\n\n      return componentDidUpdate;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.state.authenticated === null) return null;\n      var mainContent = this.state.authenticated ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(InNavbar, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }), React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, \"Snippet Title\"), React.createElement(\"input\", {\n        name: \"title\",\n        onChange: this.handldInputChange,\n        value: this.state.title,\n        type: \"text\",\n        className: \"form-control\",\n        id: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"language\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, \"Code Language\"), React.createElement(\"select\", {\n        name: \"language\",\n        onChange: this.handldInputChange,\n        value: this.state.language,\n        className: \"form-control\",\n        id: \"language\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, this.getOps())), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"desc\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, \"Snippet Description\"), React.createElement(\"textarea\", {\n        name: \"desc\",\n        onChange: this.handldInputChange,\n        value: this.state.desc,\n        className: \"form-control\",\n        id: \"desc\",\n        rows: \"3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"code\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, \"Snippet Code\"), React.createElement(\"textarea\", {\n        name: \"content\",\n        onChange: this.handldInputChange,\n        value: this.state.content,\n        className: \"form-control\",\n        id: \"code\",\n        rows: \"8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      })), React.createElement(\"button\", {\n        onClick: this.handleSubmit,\n        type: \"submit\",\n        className: \"btn btn-primary btn-lg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, \"Snipp it\")))) : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(OutNavbar, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        className: \"lead\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, \"if your are a registered Snipper go ahead and login\"), React.createElement(\"button\", {\n        className: \"btn btn-dark btn-lg\",\n        onClick: this.login,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, \"Login\"));\n      return React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, mainContent);\n    }\n  }]);\n\n  return NewSnippet;\n}(Component), _temp));","map":{"version":3,"sources":["/Users/Alhilly/Desktop/dev-social-app/client/src/components/pages/NewSnippet.js"],"names":["React","Component","withAuth","InNavbar","OutNavbar","Option","uniqid","Api","API","props","checkAuthentication","auth","isAuthenticated","authenticated","state","setState","login","logout","getOps","op","snippet","LANGUAGE_CHOICE","forEach","element","push","name","handldInputChange","event","target","value","temp_snip","console","log","Object","assign","handleSubmit","preventDefault","user_obj","JSON","parse","localStorage","getItem","getUser","idToken","clientId","then","user","snippet_to_save","title","desc","content","lang","likes","comments","author","data","saveSnippet","res","window","location","replace","language","mainContent"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { withAuth } from '@okta/okta-react';\nimport InNavbar from '../layout/InNavbar';\nimport OutNavbar from '../layout/OutNavbar';\nimport Option from './Option'\nimport uniqid from 'uniqid'\nimport Api from '../../utils/API'\nimport API from '../../utils/API';\nexport default withAuth(\n  class NewSnippet extends Component {\n    constructor(props){\n      super(props)\n      this.state = { \n        authenticated: null,\n        snippet :{\n          LANGUAGE_CHOICE : [\n            {name:'JAVASCRIPT'},\n            {name: 'CSS'},\n            {name:'HTML'},\n            {name:'C#'},\n            {name:'C++'},\n            {name: 'BASH'},\n            {name:'APACHE'},\n            {name:'XML'},\n            {name:'PHP'},\n            {name:'JSON'},\n            {name: 'PERL'},\n            {name: 'SQL'},\n            {name: 'RUBY'},\n            {name: 'PYTHON'},\n            {name: 'OBJECTIVE-C'},\n            {name: 'DIFF'},\n            {name: 'JAVA'},\n            {name: 'COFFEESCRIPT'},\n            {name:'MAKEFILE'},\n            {name: 'NGINX'}\n          ],\n          title:\"\",\n          desc:\"\",\n          content:\"\",\n          language:\"JAVASCRIPT\",\n          comments:[],\n          likes:[],\n          author:{}\n        }\n        \n    }\n    this.temp_snip={}\n    };\n\n    checkAuthentication = async () => {\n      const authenticated = await this.props.auth.isAuthenticated();\n      if (authenticated !== this.state.authenticated) {\n        this.setState({ authenticated });\n      }\n    };\n\n    async componentDidMount() {\n      this.checkAuthentication();\n    }\n\n    async componentDidUpdate() {\n      this.checkAuthentication();\n    }\n\n    login = async () => {\n      this.props.auth.login('/');\n    };\n\n    logout = async () => {\n      this.props.auth.logout('/');\n    };\n    getOps = () => {\n      let op = [];\n      this.state.snippet.LANGUAGE_CHOICE.forEach((element)=>{\n        op.push(\n        <Option value={element.name} key={uniqid()}/>\n        )\n      })\n      return op;\n    }\n    handldInputChange = event =>{\n      const {name,value}= event.target\n      temp_snip[name] = value\n      console.log(temp_snip)\n      this.setState({\n        snippet:Object.assign(this.state.snippet,temp_snip)\n      })\n    }\n    handleSubmit= (event)=>{\n      event.preventDefault();\n      let user_obj = JSON.parse(localStorage.getItem('okta-token-storage'))\n      API.getUser(user_obj.idToken.clientId)\n      .then(user => {\n        let snippet_to_save = {\n          title:this.state.snippet.title,\n          desc:this.state.snippet.desc,\n          content:this.state.snippet.content,\n          lang:this.state.snippet.lang,\n          likes:[],\n          comments:[],\n          author:user.data\n        }\n        Api.saveSnippet(snippet_to_save)\n        .then(res=>{\n        console.log(res)\n        window.location.replace('/')\n      })\n      })\n      \n      \n      \n    }\n    render() {\n      if (this.state.authenticated === null) return null;\n\n      const mainContent = this.state.authenticated ? (\n        <div>\n          <div className=\"container\">\n            <InNavbar />\n            <form>\n              <div className=\"form-group\">\n                <label htmlFor=\"email\">Snippet Title</label>\n                <input name=\"title\" onChange={this.handldInputChange} value={this.state.title} type=\"text\" className=\"form-control\" id=\"title\" />\n              </div>\n                <div className=\"form-group\">\n                  <label htmlFor=\"language\">Code Language</label>\n                  <select name=\"language\" onChange={this.handldInputChange} value={this.state.language} className=\"form-control\" id=\"language\">\n                    {this.getOps()}\n                  </select>\n                </div>\n                <div className=\"form-group\">\n                  <label htmlFor=\"desc\">Snippet Description</label>\n                  <textarea name=\"desc\" onChange={this.handldInputChange} value={this.state.desc} className=\"form-control\" id=\"desc\" rows=\"3\"></textarea>\n                </div>\n                <div className=\"form-group\">\n                  <label htmlFor=\"code\">Snippet Code</label>\n                  <textarea name=\"content\" onChange={this.handldInputChange} value={this.state.content} className=\"form-control\" id=\"code\" rows=\"8\"></textarea>\n                </div>\n                <button onClick={this.handleSubmit} type=\"submit\" className=\"btn btn-primary btn-lg\">Snipp it</button>\n            </form>\n          </div>\n        </div>\n          ) : (\n        <div>\n            <OutNavbar />\n            <p className=\"lead\">\n              if your are a registered Snipper go ahead and login\n          </p>\n            <button className=\"btn btn-dark btn-lg\" onClick={this.login}>\n              Login\n          </button>\n          </div>\n          );\n    \n          return (\n        <div className=\"container\">\n            {mainContent}\n          </div>\n          );\n        }\n      }\n);"]},"metadata":{},"sourceType":"module"}